function e(e,t){var n=new Date(e.getTime());return n.setHours(0,0,0,0),n.setDate(1),n.setMonth(n.getMonth()+t),n}function t(e,t){return function e(t,n){n||(n=[]);return 7===n.length?n:(n.push(t),e(6===t?0:t+1,n))}(t).indexOf(e.getDay())}function n(e,t){var n=new Date(e.getTime());return new Date(n.setDate(n.getDate()+t))}function a(e){return new Date(e[0],e[1],e[2])}function r(e,t,n){return n||(n=[]),n.push(e),e<t&&r(e+1,t,n)||n}function i(e,t){var n=e.split(t);return n.forEach((function(e,t){e.indexOf("d")>-1&&(n[t]="day"),e.indexOf("m")>-1&&(n[t]="month"),e.indexOf("y")>-1&&(n[t]="year")})),n}function o(e){return function(t,n){return t[e.indexOf(n)]}}function d(e){return u(e,".")||u(e,"-")||u(e,"/")}function u(e,t){return e.indexOf(t)>-1?t:null}function c(e,t){var n=d(t),a=i(t,n),r=e.split(n),u=o(a);return new Date(u(r,"year"),u(r,"month")-1,u(r,"day"))}function s(e,t){var n=d(t),a=t.split(n),r=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return a.map((function(e){return e.match(/d/i)?l(o,e):e.match(/m/i)?l(i,e):e.match(/y/i)?l(r,e):void 0})).join(n)}function l(e,t){var n=(t+"").length-(e+"").length;if(0===n)return e;if(n>0)return function(e,t){for(var n=e+"",a=0;a<t;a++)n=0+n;return n}(e,n);if(n<0)throw new Error("Invalid date format")}function f(e){return a(e.value.split("$").map((function(e){return parseInt(e)})))}function p(e,t){if(0===t.length)return e;if(e.classList)for(var n=t.split(" "),a=0;a<n.length;)e.classList.add(n[a]),a+=1;else{var r=e.getAttribute("class");r=r+" "+t,e.setAttribute("class",r)}return e}function m(e,t){var n=e.tagName.toLowerCase();p(e,t+n)}function h(e,t){for(var n=Array.prototype.slice.call(e.getElementsByTagName("*")),a=0;a<n.length;)m(n[a],t),a+=1}function v(e){return e.focus(),!0}function g(){return document.activeElement}function w(e){return document.querySelector('[data-ad-id="'+e+'"]')}function y(e){return w(""+e.getDate()+e.getMonth()+e.getFullYear())}function C(e,t,n){return t.addEventListener(e,n,!0),function(){t.removeEventListener(e,n,!0)}}function b(e){return e.hasAttribute("data-day")}function D(e,t){var n;"function"==typeof Event?n=new Event(t,{bubbles:!0,cancelable:!0}):(n=document.createEvent("Event")).initEvent(t,!0,!0),e.dispatchEvent(n)}function E(e,t,n){var a=document.createElement("th"),r=document.createElement("button");r.type="button",r.value=t+"$"+n;var i="-1"===e?'<svg data-ad-id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 16" width="6" height="16"><path data-ad-id="icon" fill-rule="evenodd" d="M6 2L0 8l6 6V2z"></path></svg>':'<svg data-ad-id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 16" width="6" height="16"><path data-ad-id="icon" fill-rule="evenodd" d="M0 14l6-6-6-6v12z"></path></svg>';return r.setAttribute("data-ad-id",e),r.setAttribute("data-direction",!0),r.innerHTML=i,r.addEventListener("mousedown",(function e(t){t.preventDefault(),t.stopPropagation(),r.removeEventListener("mousedown",e),D(r,"mousedown")})),a.appendChild(r),a}function A(e,t,n,r){return function(i,o){var d=document.createElement("td"),u=a([t,e,i]);return u.setHours(0,0,0,0)==(new Date).setHours(0,0,0,0)&&d.classList.add("ad-is-today"),d.appendChild(function(e,t,n,a,r,i){var o=document.createElement("button"),d=document.createTextNode(e);return o.value=n+"$"+t+"$"+e,o.type="button",o.setAttribute("data-day",!0),o.setAttribute("data-ad-id",""+e+t+n),o.setAttribute("aria-label",r+" "+e+" "+a+" "+n),o.setAttribute("aria-disabled",!i),o.appendChild(d),o}(i,e,t,n,o,r(u))),d}}function x(e,t,n){for(var a=document.createElement("tr"),r=e,i=0;i<7;i++)a.appendChild(t(r,n.weekdays[i])),r+=1;return{el:a,day:r}}function k(e){for(var t=document.createDocumentFragment(),n=0;n<e;n++)t.appendChild(document.createElement("td"));return t}function L(e){return e instanceof Date&&!isNaN(e)}function N(e,t,n,a){var r=t&&(L(t)&&t||c(t,a)),i=n&&(L(n)&&n||c(n,a)),o=L(e)&&e||c(e,a);return(!r||r<=o)&&(!i||i>=o)}function T(e,n,r,i){var o,d,u,c,s,l=e.getFullYear(),f=e.getMonth(),p=e.toLocaleDateString(i.locale,{month:"long"}),m=t(e,i.weekStartsOn),h=a([l,f+1,0]).getDate(),v=A(f,l,p,(o=i.minDate,d=i.maxDate,u=i.dateFormat,function(e){return N(e,o,d,u)})),g=document.createElement("table"),w=document.createElement("thead"),y=document.createElement("tbody");w.appendChild(function(e,t,n,a,r){var i=document.createElement("tr"),o=document.createElement("th"),d=(a&&r?5:(a||r)&&6)||7;if(o.colSpan=d,o.appendChild(document.createTextNode(n+" "+e)),a){var u=E("-1",e,t);i.appendChild(u)}if(i.appendChild(o),r){var c=E("1",e,t);i.appendChild(c)}return i}(l,f,p,n,r)),w.appendChild((c=i.weekdays,s=document.createElement("tr"),c.forEach((function(e){var t=document.createTextNode(e),n=document.createElement("th");n.appendChild(t),s.appendChild(n)})),s)),g.appendChild(w);var C=function(e,t,n){var a=e,r=document.createElement("tr"),i=1,o=k(7-(7-e));r.appendChild(o);for(var d=a;d<7;d++)r.appendChild(t(i,n.weekdays[i])),i+=1;return{el:r,end:i}}(m,v,i);return y.appendChild(C.el),y.appendChild(function(e,t,n,a){for(var r=Math.floor((t-e+1)/7),i=e,o=document.createDocumentFragment(),d=1,u=0;u<r;u++){var c=x(i,n,a);o.appendChild(c.el),i=c.day,d+=1}var s=document.createElement("tr"),l=0;for(u=i;u<=t;u++)s.appendChild(n(i,a.weekdays[l])),i+=1,l+=1;d+=1;var f=k(7-l);for(s.appendChild(f),o.appendChild(s);d<6;){var p=document.createElement("tr");p.appendChild(k(7)),o.appendChild(p),d+=1}return o}(C.end,h,v,i)),g.appendChild(y),g}function F(t,n,a){var i=r(a.monthsBeforeCurrent,a.monthsAfterCurrent).length,o=n<0?-1*i:i,d=o<0?0:i-1,u=o<0?i-1:0;return{date:e(t,o),before:-1*d,after:u}}var O={Up:-7,ArrowUp:-7,Down:7,ArrowDown:7,Left:-1,ArrowLeft:-1,Right:1,ArrowRight:1};function B(t,n,a,i,o){(function(t,n,a,i,o){var d=w(a.id+"group-container"),u=w(a.id+"group");u=u&&d&&d.removeChild(u),d=d||document.createElement("div"),u=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}(u=u||document.createElement("div"));var c=r(i,o);c.forEach((function(t,r){var i=void 0===c[r-1],o=void 0===c[r+1],d=e(n,t);u.appendChild(T(d,i,o,a))})),u.setAttribute("data-ad-id",a.id+"group"),u.setAttribute("data-ad-selector","datepicker-container"),d.setAttribute("data-ad-selector","group-container"),d.setAttribute("data-ad-id",a.id+"group-container"),d.appendChild(u),t.appendChild(d)})(t,n,a,i=isNaN(i)?a.monthsBeforeCurrent:i,o=isNaN(o)?a.monthsAfterCurrent:o),h(t,a.classPrefix)}function P(e,t){var n=w(t+"group-container");n&&e.removeChild(n)}function S(e,t,n,a){var r=c(n,a);max=s(r,"yyyy-mm-dd"),e.setAttribute(t,r)}function M(e,t,a){var r=f(g()),i=n(r,e),o=y(i);o&&v(o)||function(e,t,n,a){var r=F(n,t>0?1:-1,a);return B(e,r.date,a,r.before,r.after),!0}(t,e,r,a)&&v(y(i))}function I(e){return{shouldCloseOnFocusOut:function(t){var n=t.relatedTarget;return!n||(!n.getAttribute("data-ad-id")||"INPUT"===n.tagName&&n.getAttribute("data-ad-id")!==e.id+"input")}}}function H(e,t,n){var r=new I(e);function i(e){e.target.hasAttribute("data-direction")&&e.preventDefault()}function o(e){t(e.target.value,!1,!0)}function d(t){r.shouldCloseOnFocusOut(t)&&P(t.currentTarget.parentNode,e.id)}function u(t){if((""===t.target.value||"click"===t.type)&&!w(e.id+"group")){B(t.target.parentNode,n()||e.initialDate&&c(e.initialDate,e.dateFormat)||new Date,e);var a=w(e.id+"group");if(a.getBoundingClientRect().bottom>(window.innerHeight||document.documentElement.clientHeight)){var r=t.target.getBoundingClientRect().height;a.setAttribute("style","bottom: "+r+"px;")}e.onAfterOpen(a)}}function s(n){var r=n.target,i=w(e.id+"input");b(r)&&function(n,a){var r=f(n);t(r)&&(P(a.parentNode,e.id),a.focus(),D(a,"input"))}(r,i),function(e){var t=e.getAttribute("data-ad-id");return"1"===t||"-1"===t}(r)&&function(t){var n=t.currentTarget,r=parseInt(t.target.getAttribute("data-ad-id")),i=t.target.value.split("$"),o=F(i=a([i[0],i[1],1]),r,e);B(n,o.date,e,o.before,o.after)}(n)}function l(t){var a=b(g()),r=t.key,i=O[r];!t.shiftKey||"Down"!==r&&"ArrowDown"!==r?i&&a?M(i,t.currentTarget,e):"Esc"!==r&&"Escape"!==r||(v(w(e.id+"input")),P(t.currentTarget,e.id)):function(e,t,n){var a=n||t.initialDate&&c(t.initialDate,t.dateFormat)||new Date;B(e,a,t),v(y(a))}(t.currentTarget,e,n())}this.activeListeners=[],this.setListeners=function(e,t){this.activeListeners.push(C("focus",t,u)),this.activeListeners.push(C("mousedown",e,s)),this.activeListeners.push(C("keydown",e,l)),this.activeListeners.push(C("input",t,o)),this.activeListeners.push(C("click",t,u)),this.activeListeners.push(C("focusout",t,d)),this.activeListeners.push(C("mousedown",e,i))}}function q(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function R(e,t,n){var a=n.dateFormat;return function(r,u,l){var f=L(r)&&r||function(e,t){var n=d(t),a=o(i(t,n)),r=e.split(n);return 3===(r=r.map((function(e){return parseInt(e)}))).length&&(!(a(r,"month")>12||a(r,"month")<1)&&!!L(new Date(a(r,"year"),a(r,"month")-1,a(r,"day"))))}(r,a)&&c(r,a);return f&&(N(f,n.minDate,n.maxDate,a)||u)?(l||(t.value=s(f,a)),t.setCustomValidity(""),e.selectedDate=f,!0):(e.selectedDate=null,t.setCustomValidity("invalid date"),!1)}}function Y(e,t,n){return function(){var a=e.selectedDate;return n?a&&s(a,t):a}}var $={locale:"en-EN",weekDayFormat:"short",minDate:null,maxDate:null,initialDate:null,monthsBeforeCurrent:0,monthsAfterCurrent:0,weekStartsOn:1,id:"a1-",dateFormat:"yyyy-mm-dd",inputName:"datepicker-input",inputClass:"",rootClass:"",classPrefix:"a1-",translations:{description:"This is a datepicker. You can type in a date using the keyboard. Use the required date format. It should be:yyyy-mm-dd. You can also use the datepicker to select a date. Press shift and arrow down to focus the datepicker. Press left arrow to move one day back. Press right arrow to move one day ahead. Press arrow up to move one week back.  Press arrow down to move one week ahead Press Space to select a date. Press Escape to close the datepicker.",notInRange:"The date is not within the intended date range.",nextGroups:"Show next months.",prevGroups:"Show previous months."},required:!1,disabled:!1,onAfterOpen:function(e){}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('.a1-div[data-ad-selector="datepicker-container"] {\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n    z-index: 1001;\n}\n\n.a1-div[data-ad-selector="group-container"] {\n    position: relative;\n}\n\n.a1-p.visuallyhidden:not(:focus):not(:active) {\n    position: absolute;\n  \n    width: 1px;\n    height: 1px;\n    margin: -1px;\n    border: 0;\n    padding: 0;\n  \n    white-space: nowrap;\n  \n    clip-path: inset(100%);\n    clip: rect(0 0 0 0);\n    overflow: hidden;\n}\n\n.a1-td:empty::after {\n    content: "\\00a0";\n  }');export default function(e){var t={selectedDate:null,config:$,listeners:null};function r(e){var r,i,o;t.config=(r=t.config,i=e||{},o=q({},r),o=q(o,i));var d,u=t.config.monthsBeforeCurrent;t.config.monthsBeforeCurrent=u<0?u:-1*u,t.config.weekdays=function e(t,a,r,i){return i||(i=[]),7===i.length?i:(i.push(t.toLocaleDateString(a,{weekday:r})),e(n(t,1),a,r,i))}((d=t.config.weekStartsOn,n(a([2014,10,9]),d)),t.config.locale,t.config.weekDayFormat)}function i(e){var n,a,r,i=document.getElementById(e.id);if(p(i,e.rootClass),h(i,e.classPrefix),navigator.userAgent.match(/mobi/gi))!function(e,t){var n=document.createElement("input");n.type="date",t.maxDate&&S(n,"max",t.maxDate,t.dateFormat),t.minDate&&S(n,"min",t.minDate,t.dateFormat),e.appendChild(n)}(i,e);else{var o=function(e,t){var n=document.createElement("p");n.appendChild(document.createTextNode(t.translations.description)),n.classList.add("visuallyhidden"),n.id=t.id+"description",e.appendChild(n);var a=document.createElement("input");return a.setAttribute("aria-describedby",t.id+"description"),a.type="text",a.setAttribute("data-ad-id",t.id+"input"),a.setAttribute("name",t.inputName),a.setAttribute("autocomplete","off"),t.disabled&&a.setAttribute("disabled",t.disabled),!t.disabled&&t.required&&a.setAttribute("required","true"),a=p(a,t.inputClass),e.appendChild(a),h(e,t.classPrefix),a}(i,e);n=R(t,o,e),a=Y(t,e.dateFormat),r=Y(t,e.dateFormat,!0),t.listeners=new H(e,n,a),t.listeners.setListeners(i,o)}return{getConfig:function(){return t.config},setDate:n,getDate:a,getDateAsString:r}}return function e(n){r(n),document.getElementById(t.config.id).innerHTML="",t.listeners&&function(e){for(var t=0;t<e.length;)e[t](),t++}(t.listeners.activeListeners);var a=i(t.config);return t.selectedDate&&a.setDate(t.selectedDate),a.updateDatepicker=e,a}(e)}
