"use strict";function e(e,t){var n=new Date(e.getTime());return n.setHours(0,0,0,0),n.setDate(1),n.setMonth(n.getMonth()+t),n}function t(e,t){return function e(t,n){n||(n=[]);return 7===n.length?n:(n.push(t),e(6===t?0:t+1,n))}(t).indexOf(e.getDay())}function n(e,t){var n=new Date(e.getTime());return new Date(n.setDate(n.getDate()+t))}function r(e){return new Date(e[0],e[1],e[2])}function a(e,t,n){return n||(n=[]),n.push(e),e<t&&a(e+1,t,n)||n}function i(e,t){var n=e.split(t);return n.forEach((function(e,t){e.indexOf("d")>-1&&(n[t]="day"),e.indexOf("m")>-1&&(n[t]="month"),e.indexOf("y")>-1&&(n[t]="year")})),n}function o(e){return function(t,n){return t[e.indexOf(n)]}}function d(e){return u(e,".")||u(e,"-")||u(e,"/")}function u(e,t){return e.indexOf(t)>-1?t:null}function c(e,t){var n=d(t),r=i(t,n),a=e.split(n),u=o(r);return new Date(u(a,"year"),u(a,"month")-1,u(a,"day"))}function s(e,t){var n=d(t),r=t.split(n),a=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return r.map((function(e){return e.match(/d/i)?l(o,e):e.match(/m/i)?l(i,e):e.match(/y/i)?l(a,e):void 0})).join(n)}function l(e,t){var n=(t+"").length-(e+"").length;if(0===n)return e;if(n>0)return function(e,t){for(var n=e+"",r=0;r<t;r++)n=0+n;return n}(e,n);if(n<0)throw new Error("Invalid date format")}function f(e){return r(e.value.split("$").map((function(e){return parseInt(e)})))}function p(e,t){if(0===t.length)return e;if(e.classList)for(var n=t.split(" "),r=0;r<n.length;)e.classList.add(n[r]),r+=1;else{var a=e.getAttribute("class");a=a+" "+t,e.setAttribute("class",a)}return e}function m(e,t){var n=e.tagName.toLowerCase();p(e,t+n)}function h(e,t){for(var n=Array.prototype.slice.call(e.getElementsByTagName("*")),r=0;r<n.length;)m(n[r],t),r+=1}function v(e){return e.focus(),!0}function g(){return document.activeElement}function w(e){return document.querySelector('[data-ad-id="'+e+'"]')}function y(e){return w(""+e.getDate()+e.getMonth()+e.getFullYear())}function C(e,t,n){return t.addEventListener(e,n,!0),function(){t.removeEventListener(e,n,!0)}}function b(e){return e.hasAttribute("data-day")}function D(e,t){var n;"function"==typeof Event?n=new Event(t,{bubbles:!0,cancelable:!0}):(n=document.createEvent("Event")).initEvent(t,!0,!0),e.dispatchEvent(n)}function E(e,t,n){var r=document.createElement("th"),a=document.createElement("button");a.type="button",a.value=t+"$"+n;var i="-1"===e?'<svg data-ad-id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 16" width="6" height="16"><path data-ad-id="icon" fill-rule="evenodd" d="M6 2L0 8l6 6V2z"></path></svg>':'<svg data-ad-id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 16" width="6" height="16"><path data-ad-id="icon" fill-rule="evenodd" d="M0 14l6-6-6-6v12z"></path></svg>';return a.setAttribute("data-ad-id",e),a.setAttribute("data-direction",!0),a.innerHTML=i,a.addEventListener("mousedown",(function e(t){t.preventDefault(),t.stopPropagation(),a.removeEventListener("mousedown",e),D(a,"mousedown")})),r.appendChild(a),r}function A(e,t,n,a){return function(i,o){var d=document.createElement("td"),u=r([t,e,i]);return u.setHours(0,0,0,0)==(new Date).setHours(0,0,0,0)&&d.classList.add("ad-is-today"),d.appendChild(function(e,t,n,r,a,i){var o=document.createElement("button"),d=document.createTextNode(e);return o.value=n+"$"+t+"$"+e,o.type="button",o.setAttribute("data-day",!0),o.setAttribute("data-ad-id",""+e+t+n),o.setAttribute("aria-label",a+" "+e+" "+r+" "+n),o.setAttribute("aria-disabled",!i),o.appendChild(d),o}(i,e,t,n,o,a(u))),d}}function x(e,t,n){for(var r=document.createElement("tr"),a=e,i=0;i<7;i++)r.appendChild(t(a,n.weekdays[i])),a+=1;return{el:r,day:a}}function k(e){for(var t=document.createDocumentFragment(),n=0;n<e;n++)t.appendChild(document.createElement("td"));return t}function L(e){return e instanceof Date&&!isNaN(e)}function N(e,t,n,r){var a=t&&(L(t)&&t||c(t,r)),i=n&&(L(n)&&n||c(n,r)),o=L(e)&&e||c(e,r);return(!a||a<=o)&&(!i||i>=o)}function T(e,n,a,i){var o,d,u,c,s,l=e.getFullYear(),f=e.getMonth(),p=e.toLocaleDateString(i.locale,{month:"long"}),m=t(e,i.weekStartsOn),h=r([l,f+1,0]).getDate(),v=A(f,l,p,(o=i.minDate,d=i.maxDate,u=i.dateFormat,function(e){return N(e,o,d,u)})),g=document.createElement("table"),w=document.createElement("thead"),y=document.createElement("tbody");w.appendChild(function(e,t,n,r,a){var i=document.createElement("tr"),o=document.createElement("th"),d=(r&&a?5:(r||a)&&6)||7;if(o.colSpan=d,o.appendChild(document.createTextNode(n+" "+e)),r){var u=E("-1",e,t);i.appendChild(u)}if(i.appendChild(o),a){var c=E("1",e,t);i.appendChild(c)}return i}(l,f,p,n,a)),w.appendChild((c=i.weekdays,s=document.createElement("tr"),c.forEach((function(e){var t=document.createTextNode(e),n=document.createElement("th");n.appendChild(t),s.appendChild(n)})),s)),g.appendChild(w);var C=function(e,t,n){var r=e,a=document.createElement("tr"),i=1,o=k(7-(7-e));a.appendChild(o);for(var d=r;d<7;d++)a.appendChild(t(i,n.weekdays[i])),i+=1;return{el:a,end:i}}(m,v,i);return y.appendChild(C.el),y.appendChild(function(e,t,n,r){for(var a=Math.floor((t-e+1)/7),i=e,o=document.createDocumentFragment(),d=1,u=0;u<a;u++){var c=x(i,n,r);o.appendChild(c.el),i=c.day,d+=1}var s=document.createElement("tr"),l=0;for(u=i;u<=t;u++)s.appendChild(n(i,r.weekdays[l])),i+=1,l+=1;d+=1;var f=k(7-l);for(s.appendChild(f),o.appendChild(s);d<6;){var p=document.createElement("tr");p.appendChild(k(7)),o.appendChild(p),d+=1}return o}(C.end,h,v,i)),g.appendChild(y),g}function F(t,n,r){var i=a(r.monthsBeforeCurrent,r.monthsAfterCurrent).length,o=n<0?-1*i:i,d=o<0?0:i-1,u=o<0?i-1:0;return{date:e(t,o),before:-1*d,after:u}}var O={Up:-7,ArrowUp:-7,Down:7,ArrowDown:7,Left:-1,ArrowLeft:-1,Right:1,ArrowRight:1};function B(t,n,r,i,o){(function(t,n,r,i,o){var d=w(r.id+"group-container"),u=w(r.id+"group");u=u&&d&&d.removeChild(u),d=d||document.createElement("div"),u=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}(u=u||document.createElement("div"));var c=a(i,o);c.forEach((function(t,a){var i=void 0===c[a-1],o=void 0===c[a+1],d=e(n,t);u.appendChild(T(d,i,o,r))})),u.setAttribute("data-ad-id",r.id+"group"),u.setAttribute("data-ad-selector","datepicker-container"),d.setAttribute("data-ad-selector","group-container"),d.setAttribute("data-ad-id",r.id+"group-container"),d.appendChild(u),t.appendChild(d)})(t,n,r,i=isNaN(i)?r.monthsBeforeCurrent:i,o=isNaN(o)?r.monthsAfterCurrent:o),h(t,r.classPrefix)}function P(e,t){var n=w(t+"group-container");n&&e.removeChild(n)}function S(e,t,n,r){var a=c(n,r);max=s(a,"yyyy-mm-dd"),e.setAttribute(t,a)}function M(e,t,r){var a=f(g()),i=n(a,e),o=y(i);o&&v(o)||function(e,t,n,r){var a=F(n,t>0?1:-1,r);return B(e,a.date,r,a.before,a.after),!0}(t,e,a,r)&&v(y(i))}function I(e){return{shouldCloseOnFocusOut:function(t){var n=t.relatedTarget;return!n||(!n.getAttribute("data-ad-id")||"INPUT"===n.tagName&&n.getAttribute("data-ad-id")!==e.id+"input")}}}function H(e,t,n){var a=new I(e);function i(e){e.target.hasAttribute("data-direction")&&e.preventDefault()}function o(e){t(e.target.value,!1,!0)}function d(t){a.shouldCloseOnFocusOut(t)&&P(t.currentTarget.parentNode,e.id)}function u(t){if((""===t.target.value||"click"===t.type)&&!w(e.id+"group")){B(t.target.parentNode,n()||e.initialDate&&c(e.initialDate,e.dateFormat)||new Date,e);var r=w(e.id+"group");if(r.getBoundingClientRect().bottom>(window.innerHeight||document.documentElement.clientHeight)){var a=t.target.getBoundingClientRect().height;r.setAttribute("style","bottom: "+a+"px;")}e.onAfterOpen(r)}}function s(n){var a=n.target,i=w(e.id+"input");b(a)&&function(n,r){var a=f(n);t(a)&&(P(r.parentNode,e.id),r.focus(),D(r,"input"))}(a,i),function(e){var t=e.getAttribute("data-ad-id");return"1"===t||"-1"===t}(a)&&function(t){var n=t.currentTarget,a=parseInt(t.target.getAttribute("data-ad-id")),i=t.target.value.split("$"),o=F(i=r([i[0],i[1],1]),a,e);B(n,o.date,e,o.before,o.after)}(n)}function l(t){var r=b(g()),a=t.key,i=O[a];!t.shiftKey||"Down"!==a&&"ArrowDown"!==a?i&&r?M(i,t.currentTarget,e):"Esc"!==a&&"Escape"!==a||(v(w(e.id+"input")),P(t.currentTarget,e.id)):function(e,t,n){var r=n||t.initialDate&&c(t.initialDate,t.dateFormat)||new Date;B(e,r,t),v(y(r))}(t.currentTarget,e,n())}this.activeListeners=[],this.setListeners=function(e,t){this.activeListeners.push(C("focus",t,u)),this.activeListeners.push(C("mousedown",e,s)),this.activeListeners.push(C("keydown",e,l)),this.activeListeners.push(C("input",t,o)),this.activeListeners.push(C("click",t,u)),this.activeListeners.push(C("focusout",t,d)),this.activeListeners.push(C("mousedown",e,i))}}function q(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function R(e,t,n){var r=n.dateFormat;return function(a,u,l){var f=L(a)&&a||function(e,t){var n=d(t),r=o(i(t,n)),a=e.split(n);return 3===(a=a.map((function(e){return parseInt(e)}))).length&&(!(r(a,"month")>12||r(a,"month")<1)&&!!L(new Date(r(a,"year"),r(a,"month")-1,r(a,"day"))))}(a,r)&&c(a,r);return f&&(N(f,n.minDate,n.maxDate,r)||u)?(l||(t.value=s(f,r)),t.setCustomValidity(""),e.selectedDate=f,!0):(e.selectedDate=null,t.setCustomValidity("invalid date"),!1)}}function Y(e,t,n){return function(){var r=e.selectedDate;return n?s(r,t):r}}var $={locale:"en-EN",weekDayFormat:"short",minDate:null,maxDate:null,initialDate:null,monthsBeforeCurrent:0,monthsAfterCurrent:0,weekStartsOn:1,id:"a1-",dateFormat:"yyyy-mm-dd",inputName:"datepicker-input",inputClass:"",rootClass:"",classPrefix:"a1-",translations:{description:"This is a datepicker. You can type in a date using the keyboard. Use the required date format. It should be:yyyy-mm-dd. You can also use the datepicker to select a date. Press shift and arrow down to focus the datepicker. Press left arrow to move one day back. Press right arrow to move one day ahead. Press arrow up to move one week back.  Press arrow down to move one week ahead Press Space to select a date. Press Escape to close the datepicker.",notInRange:"The date is not within the intended date range.",nextGroups:"Show next months.",prevGroups:"Show previous months."},required:!1,disabled:!1,onAfterOpen:function(e){}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('.a1-div[data-ad-selector="datepicker-container"] {\r\n    position: absolute;\r\n    display: flex;\r\n    flex-direction: row;\r\n    z-index: 1001;\r\n}\r\n\r\n.a1-div[data-ad-selector="group-container"] {\r\n    position: relative;\r\n}\r\n\r\n.a1-p.visuallyhidden:not(:focus):not(:active) {\r\n    position: absolute;\r\n  \r\n    width: 1px;\r\n    height: 1px;\r\n    margin: -1px;\r\n    border: 0;\r\n    padding: 0;\r\n  \r\n    white-space: nowrap;\r\n  \r\n    clip-path: inset(100%);\r\n    clip: rect(0 0 0 0);\r\n    overflow: hidden;\r\n}\r\n\r\n.a1-td:empty::after {\r\n    content: "\\00a0";\r\n  }'),module.exports=function(e){var t={selectedDate:null,config:$,listeners:null};function a(e){var a,i,o;t.config=(a=t.config,i=e||{},o=q({},a),o=q(o,i));var d,u=t.config.monthsBeforeCurrent;t.config.monthsBeforeCurrent=u<0?u:-1*u,t.config.weekdays=function e(t,r,a,i){return i||(i=[]),7===i.length?i:(i.push(t.toLocaleDateString(r,{weekday:a})),e(n(t,1),r,a,i))}((d=t.config.weekStartsOn,n(r([2014,10,9]),d)),t.config.locale,t.config.weekDayFormat)}function i(e){var n,r,a,i=document.getElementById(e.id);if(p(i,e.rootClass),h(i,e.classPrefix),navigator.userAgent.match(/mobi/gi))!function(e,t){var n=document.createElement("input");n.type="date",t.maxDate&&S(n,"max",t.maxDate,t.dateFormat),t.minDate&&S(n,"min",t.minDate,t.dateFormat),e.appendChild(n)}(i,e);else{var o=function(e,t){var n=document.createElement("p");n.appendChild(document.createTextNode(t.translations.description)),n.classList.add("visuallyhidden"),n.id=t.id+"description",e.appendChild(n);var r=document.createElement("input");return r.setAttribute("aria-describedby",t.id+"description"),r.type="text",r.setAttribute("data-ad-id",t.id+"input"),r.setAttribute("name",t.inputName),r.setAttribute("autocomplete","off"),t.disabled&&r.setAttribute("disabled",t.disabled),!t.disabled&&t.required&&r.setAttribute("required","true"),r=p(r,t.inputClass),e.appendChild(r),h(e,t.classPrefix),r}(i,e);n=R(t,o,e),r=Y(t,e.dateFormat),a=Y(t,e.dateFormat,!0),t.listeners=new H(e,n,r),t.listeners.setListeners(i,o)}return{getConfig:function(){return t.config},setDate:n,getDate:r,getDateAsString:a}}return function e(n){a(n),document.getElementById(t.config.id).innerHTML="",t.listeners&&function(e){for(var t=0;t<e.length;)e[t](),t++}(t.listeners.activeListeners);var r=i(t.config);return t.selectedDate&&r.setDate(t.selectedDate),r.updateDatepicker=e,r}(e)};
